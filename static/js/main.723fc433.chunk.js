(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{20:function(e,t,c){},22:function(e,t,c){},32:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(11),r=c.n(s),i=c(3),o=c(15),l=c(2),d=(c(20),c(12)),b=c.n(d),j="https://bloggy-api.herokuapp.com/",u=function(e){return fetch("".concat(j,"posts/").concat(e,"?_embed=comments")).then((function(e){if(!e.ok)throw new Error("Error");return e.json()}))},m=c(0),h=function(e){var t=e.changePostId,c=e.selectedPostId,n=e.posts;return Object(m.jsxs)("div",{className:"container col-10",children:[Object(m.jsx)("h2",{children:"Posts:"}),n.map((function(e){return Object(m.jsxs)("div",{className:"card mb-4",children:[Object(m.jsx)("div",{className:"card-header",children:"Featured"}),Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:e.title}),Object(m.jsx)("p",{className:"card-text",children:e.body}),Object(m.jsx)("button",{type:"button",className:b()("me-2","btn","btn-primary",{"btn-info":c===e.id}),onClick:function(){c===e.id?t(0):t(e.id)},children:c===e.id?"Close":"Open"}),Object(m.jsx)("button",{type:"button",className:"btn btn-danger me-2",onClick:function(){return t=e.id,fetch("".concat(j,"posts/").concat(t),{method:"DELETE"});var t},children:"Delete"})]})]},e.id)}))]})},O=(c(22),function(){return Object(m.jsx)("div",{className:"Loader",children:Object(m.jsx)("div",{className:"Loader__content"})})}),p=function(e){var t=e.postId,c=e.addNewComment,a=Object(n.useState)(""),s=Object(l.a)(a,2),r=s[0],i=s[1],o=function(e){e.preventDefault(),c({body:r,postId:t}),i("")};return Object(m.jsxs)("form",{className:"container",children:[Object(m.jsx)("div",{className:"input-group mb-2",children:Object(m.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"form-control","aria-label":"With textarea",value:r,onChange:function(e){return function(e){i(e.target.value)}(e)}})}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",value:r,onClick:function(e){return o(e)},children:"Add a comment"})]})},x=function(e){var t,c=e.selectedPostId,a=Object(n.useState)({}),s=Object(l.a)(a,2),r=s[0],i=s[1],o=Object(n.useState)(!0),d=Object(l.a)(o,2),b=d[0],h=d[1],x=Object(n.useState)(!0),v=Object(l.a)(x,2),f=v[0],N=v[1];Object(n.useEffect)((function(){N(!0),u(c).then((function(e){i(e),N(!1)})).catch((function(e){throw i(null),new Error(e)}))}),[c]);return f?Object(m.jsx)(O,{}):Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{children:"Post details:"}),Object(m.jsxs)("div",{className:"card mb-2",children:[Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("h5",{className:"card-title",children:null===r||void 0===r?void 0:r.title}),Object(m.jsx)("p",{className:"card-text",children:null===r||void 0===r?void 0:r.body})]}),Object(m.jsx)("ul",{className:"list-group list-group-flush",children:b&&Object(m.jsx)(m.Fragment,{children:null===r||void 0===r||null===(t=r.comments)||void 0===t?void 0:t.map((function(e){return Object(m.jsx)("li",{className:"list-group-item",children:Object(m.jsx)("p",{children:e.body})},e.id)}))})}),Object(m.jsx)("div",{className:"card-body",children:Object(m.jsx)("button",{type:"button",className:"btn btn-info mb-4",onClick:function(){h(!b)},children:b?"Hide comments":"Show comments"})})]}),Object(m.jsx)("section",{children:Object(m.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(m.jsx)(p,{postId:c,addNewComment:function(e){(function(e){return fetch("".concat(j,"comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})})(e).then((function(){u(c),N(!0),N(!1)}))}})})})]})},v=function(e){var t=e.maxId,c=Object(n.useState)(t),a=Object(l.a)(c,2),s=a[0],r=a[1],i=Object(n.useState)(""),o=Object(l.a)(i,2),d=o[0],b=o[1],u=Object(n.useState)(""),h=Object(l.a)(u,2),O=h[0],p=h[1],x=function(e){var t;e.preventDefault(),t={id:s+1,title:O,body:d},fetch("".concat(j,"posts"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}),r(s+1),p(""),b("")};return Object(m.jsxs)("form",{className:"container",children:[Object(m.jsx)("div",{className:"input-group mb-2",children:Object(m.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:O,onChange:function(e){return function(e){p(e.target.value)}(e)}})}),Object(m.jsx)("div",{className:"input-group mb-2",children:Object(m.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:d,onChange:function(e){return function(e){b(e.target.value)}(e)}})}),Object(m.jsx)("button",{type:"submit",className:"btn btn-primary",value:d,onClick:function(e){return x(e)},children:"Add a post"})]})},f=function(){return Object(m.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(m.jsxs)("div",{className:"container-fluid",children:[Object(m.jsx)(i.b,{className:"navbar-brand",to:"",children:"Logo"}),Object(m.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("span",{className:"navbar-toggler-icon"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link","aria-current":"page",to:"",children:"Home"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"#",children:"Posts"})})]})})]})})},N=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(0),r=Object(l.a)(s,2),i=r[0],d=r[1],b=Object(n.useState)(!1),u=Object(l.a)(b,2),p=u[0],N=u[1];Object(n.useEffect)((function(){N(!1),fetch("".concat(j,"posts")).then((function(e){if(!e.ok)throw new Error("Error");return e.json()})).then((function(e){a(e),N(!0)}))}),[]);return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(f,{}),Object(m.jsxs)("main",{className:"App__main",children:[Object(m.jsx)("div",{className:"App__sidebar",children:p?Object(m.jsx)(m.Fragment,{children:0!==c.length?Object(m.jsx)(h,{changePostId:function(e){d(e)},selectedPostId:i,posts:c}):Object(m.jsx)("h2",{children:"have any posts yet"})}):Object(m.jsx)(O,{})}),0!==i&&Object(m.jsx)("div",{className:"App__content",children:Object(m.jsx)(x,{selectedPostId:i})}),Object(m.jsx)(v,{maxId:Math.max.apply(Math,Object(o.a)(c.map((function(e){return e.id}))))})]})]})};c(31);r.a.render(Object(m.jsx)(i.a,{children:Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(N,{})})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.723fc433.chunk.js.map