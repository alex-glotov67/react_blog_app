(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{23:function(e,t,c){},33:function(e,t,c){},35:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),s=c(14),o=c.n(s),r=c(4),i=c(18),l=c(3),d=c(2),j=(c(23),"https://bloggy-api.herokuapp.com/"),b=function(e){return fetch("".concat(j,"posts/").concat(e,"?_embed=comments")).then((function(e){if(!e.ok)throw new Error("Error");return e.json()}))},u=c(0),h=function(e){var t=e.maxId,c=Object(n.useState)(t),a=Object(l.a)(c,2),s=a[0],o=a[1],r=Object(n.useState)(""),i=Object(l.a)(r,2),d=i[0],b=i[1],h=Object(n.useState)(""),m=Object(l.a)(h,2),p=m[0],O=m[1],x=function(e){var t;e.preventDefault(),t={id:s+1,title:p,body:d},fetch("".concat(j,"posts"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)}),o(s+1),O(""),b("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:p,onChange:function(e){return function(e){O(e.target.value)}(e)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:d,onChange:function(e){return function(e){b(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",onClick:function(e){return x(e)},children:"Add a post"})]})},m=function(){return Object(u.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-2",children:Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(r.b,{className:"navbar-brand",to:"/home",children:"Logo"}),Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("span",{className:"navbar-toggler-icon"})}),Object(u.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link","aria-current":"page",to:"/home",children:"Home"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/posts",children:"Posts"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(r.b,{className:"nav-link",to:"/add_post",children:"Add Post"})})]})})]})})},p=(c(33),function(){return Object(u.jsx)("div",{className:"Loader",children:Object(u.jsx)("div",{className:"Loader__content"})})}),O=function(e){var t=e.postId,c=e.addNewComment,a=Object(n.useState)(""),s=Object(l.a)(a,2),o=s[0],r=s[1],i=function(e){e.preventDefault(),c({body:o,postId:t}),r("")};return Object(u.jsxs)("form",{children:[Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"form-control","aria-label":"With textarea",value:o,onChange:function(e){return function(e){r(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary",value:o,onClick:function(e){return i(e)},children:"Add a comment"})]})},x=function(e){var t,c,a=e.selectedPostId,s=Object(n.useState)({}),o=Object(l.a)(s,2),r=o[0],i=o[1],d=Object(n.useState)(!0),h=Object(l.a)(d,2),m=h[0],x=h[1],f=Object(n.useState)(!0),v=Object(l.a)(f,2),N=v[0],g=v[1];Object(n.useEffect)((function(){g(!0),b(a).then((function(e){i(e),g(!1)})).catch((function(e){throw i(null),new Error(e)}))}),[a]);return N?Object(u.jsx)(p,{}):Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{children:"Post details:"}),Object(u.jsxs)("div",{className:"card mb-2",children:[Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:null===r||void 0===r?void 0:r.title}),Object(u.jsx)("p",{className:"card-text",children:null===r||void 0===r?void 0:r.body})]}),Object(u.jsx)("ul",{className:"list-group list-group-flush",children:m&&Object(u.jsx)(u.Fragment,{children:null===r||void 0===r||null===(t=r.comments)||void 0===t?void 0:t.map((function(e){return Object(u.jsx)("li",{className:"list-group-item",children:Object(u.jsx)("p",{className:"ps-2",children:e.body})},e.id)}))})}),Object(u.jsx)("div",{className:"card-body",children:Object(u.jsxs)("button",{type:"button",className:"btn btn-info mb-4",onClick:function(){x(!m)},children:[m?"Hide ":"Show ","".concat(null===r||void 0===r||null===(c=r.comments)||void 0===c?void 0:c.length," comments")]})})]}),Object(u.jsx)(O,{postId:a,addNewComment:function(e){(function(e){return fetch("".concat(j,"comments"),{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})})(e).then((function(){b(a),g(!0),g(!1)}))}})]})},f=c(17),v=c.n(f),N=function(e){var t=e.changePostId,c=e.selectedPostId,n=e.posts,a=Object(d.g)();return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Posts"}),n.map((function(e){return Object(u.jsxs)("div",{className:"card mb-4",children:[Object(u.jsx)("div",{className:"card-header",children:"Featured"}),Object(u.jsxs)("div",{className:"card-body",children:[Object(u.jsx)("h5",{className:"card-title",children:e.title}),Object(u.jsx)("p",{className:"card-text",children:e.body}),Object(u.jsx)(r.b,{to:"/posts/".concat(e.id),className:v()("me-2","btn","btn-primary",{"btn-info":c===e.id}),onClick:function(){c===e.id?(t(0),a.goBack()):t(e.id)},children:c===e.id?"Close":"Open"}),Object(u.jsx)(r.b,{to:"/update_post/".concat(e.id),className:"btn btn-warning me-2",children:"Update"}),Object(u.jsx)("button",{type:"button",className:"btn btn-danger me-2",onClick:function(){return t=e.id,fetch("".concat(j,"posts/").concat(t),{method:"DELETE"});var t},children:"Delete"})]})]},e.id)}))]})},g=function(e){var t=e.posts,c=e.loader,a=Object(n.useState)(0),s=Object(l.a)(a,2),o=s[0],r=s[1];return Object(n.useEffect)((function(){}),[t]),Object(u.jsxs)("div",{className:"row align-items-start",children:[Object(u.jsx)("div",{className:"col",children:c?Object(u.jsx)(u.Fragment,{children:0!==t.length?Object(u.jsx)(N,{changePostId:function(e){r(e)},selectedPostId:o,posts:t}):Object(u.jsx)("h2",{children:"have any posts yet"})}):Object(u.jsx)(p,{})}),Object(u.jsx)(d.b,{path:"/posts/:postId",exact:!0,children:0!==o&&Object(u.jsx)("div",{className:"col-lg-5",children:Object(u.jsx)(x,{selectedPostId:o})})})]})},y=function(){return Object(u.jsx)("h1",{className:"title",children:"Page not found"})},S=function(){return Object(u.jsx)("h1",{className:"title",children:"Home Page"})},C=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),o=Object(l.a)(s,2),i=o[0],b=o[1],h=(Object(d.h)()||"").postId,m=function(e){e.preventDefault(),function(e,t){fetch("".concat(j,"posts/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(e)})}({title:i,body:c},h),b(""),a("")};return Object(u.jsxs)("form",{className:"container",children:[Object(u.jsx)("h2",{className:"title text-center",children:"Add your post"}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("input",{name:"title",placeholder:"Post title",className:"form-control",value:i,onChange:function(e){return function(e){b(e.target.value)}(e)}})}),Object(u.jsx)("div",{className:"input-group mb-2",children:Object(u.jsx)("textarea",{name:"body",placeholder:"Type post here",className:"form-control",value:c,onChange:function(e){return function(e){a(e.target.value)}(e)}})}),Object(u.jsx)("button",{type:"submit",className:"btn btn-primary me-2",onClick:function(e){return m(e)},children:"Update a post"}),Object(u.jsx)(r.b,{to:"/posts",className:"btn btn-danger",children:"Close"})]})},k=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(!1),o=Object(l.a)(s,2),r=o[0],b=o[1];Object(n.useEffect)((function(){b(!1),fetch("".concat(j,"posts")).then((function(e){if(!e.ok)throw new Error("Error");return e.json()})).then((function(e){a(e),b(!0)}))}),[]);return Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)(m,{}),Object(u.jsxs)(d.d,{children:[Object(u.jsx)(d.b,{path:"/",exact:!0,children:Object(u.jsx)(S,{})}),Object(u.jsx)(d.b,{path:"/posts",children:Object(u.jsx)(g,{posts:c,loader:r})}),Object(u.jsx)(d.b,{path:"/add_post",children:Object(u.jsx)(h,{maxId:Math.max.apply(Math,Object(i.a)(c.map((function(e){return e.id}))))})}),Object(u.jsx)(d.b,{path:"/update_post/:postId",component:C}),Object(u.jsx)(d.a,{path:"/home",to:"/"}),Object(u.jsx)(y,{})]})]})};c(34);o.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(k,{})})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.1b5963bf.chunk.js.map